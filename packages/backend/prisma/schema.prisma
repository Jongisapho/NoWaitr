generator client {
provider = "prisma-client-js"
}


datasource db {
provider = "postgresql"
url = env("DATABASE_URL")
}

enum Role {
    CUSTOMER
    ADMIN
}

model User {
    id Int @id @default(autoincrement())
    email String @unique
    passwordHash String
    name String?
    role Role @default(CUSTOMER)
    venue Venue? @relation(fields: [venueId], references: [id])
    venueId Int?
    createdAt DateTime @default(now())
    // Must add session / refresh tokens

}
model Venue {
id Int @id @default(autoincrement())
name String
queues Queue[]
users User[] // users related to this venue (staff/admin)
createdAt DateTime @default(now())
}


model Queue {
id Int @id @default(autoincrement())
name String
venue Venue? @relation(fields: [venueId], references: [id])
venueId Int?
items QueueItem[]
createdAt DateTime @default(now())
}


model QueueItem {
id Int @id @default(autoincrement())
queue Queue @relation(fields: [queueId], references: [id])
queueId Int
userName String
position Int
status String @default("waiting") // waiting | served | canceled
joinedAt DateTime @default(now())
}